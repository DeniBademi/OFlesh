jQuery(document).ready(function(s){function t(t){s(".page").removeClass("is-active"),s(".page--"+t).addClass("is-active")}s(".btn").on("click",function(){s(".modal").toggleClass("is-open")}),s(".dropdown").on("click",function(){s(this).toggleClass("is-open")}),s(".radio, .checkbox").on("click",function(){s(this).toggleClass("is-selected")}),s("input, select").on("focus",function(){s(this).parent(".input").addClass("is-active")}),s("input, select").on("blur",function(){var t=!!s(this).val();s(this).parent(".input").removeClass("is-active"),s(this).parent(".input").toggleClass("has-value",t);var i=RegExp(s(this).data("mask")),a=s(this).val(),e=i.test(a),n=null,l=s(this)[0].hasAttribute("data-luhn");l&&(n=function s(t){for(var i=t.length,a=0,e=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],n=0;i--;)n+=e[a][parseInt(t.charAt(i),10)],a^=1;return n%10==0&&n>0}(a.replace(/\-/gmi,"")),console.log(n)),l&&!n?s(this).parent(".input").addClass("has-errors"):a&&!e?s(this).parent(".input").addClass("has-errors"):s(this).parent(".input").removeClass("has-errors")}),s("input").on("input",function(){RegExp(s(this).data("mask")).test(s(this).val())?s(this).parent(".input").addClass("is-valid"):s(this).parent(".input").removeClass("is-valid"),s(this).parent(".input").removeClass("has-errors")}),s("#ccnumber").on("input",function(){var t=s(this).val();str=(t=t.replace(/\D/gmi,"")).match(/.{1,4}/g),s(this).val(str?str.join(" "):"")}),s(".control__input").on("change",function(){var t=s(this);s(this).parent(".control").toggleClass("is-selected",this.checked),s(".control__input").each(function(i){s(this).attr("id")!==t.attr("id")&&s(this).attr("name")===t.attr("name")&&s(this).parent(".control").removeClass("is-selected")})}),s("#to-shipping-method").on("click",function(s){s.preventDefault(),t(2)}),s("#to-payment-method").on("click",function(s){s.preventDefault(),t(3)}),s(".js-goto").on("click",function(i){i.preventDefault();var a=s(this);a.addClass("is-loading"),a.removeClass("is-loading"),t(a.data("page"))}),s(".js-add-giftcard").on("click",function(t){t.preventDefault();var i,a=s("#giftcard").val();a&&(i=a,s(".cards").after('<div class="giftcard"><div class="f"><div class="f70"><b>'+i+'</b><div class="microcopy">Balance left: $0.00</div></div><div class="f30">$50.00</div></div></div>'),s(".giftcard").first().hide().fadeIn(),s("#giftcard").val(""),s("#giftcard").blur())}),s(".collapser__label").on("click",function(t){t.preventDefault(),s(this).parent(".collapser").toggleClass("is-open"),s(".collapser").hasClass("is-open"),s(this).parent(".collapser").find(".collapser__content input")&&s(this).parent(".collapser").find(".collapser__content input").first().focus()}),s("#billing-same").on("change",function(){s(this)[0].checked?s("#billing").hide():s("#billing").show()}),s("#payment-cc, #payment-paypal").on("change",function(){"payment-cc"===s(this)[0].id?(s(".message").eq(0).addClass("is-visible").removeClass("is-hidden"),s(".message").eq(1).addClass("is-hidden").removeClass("is-visible")):(s(".message").eq(1).addClass("is-visible").removeClass("is-hidden"),s(".message").eq(0).addClass("is-hidden").removeClass("is-visible"))}),s(".js-toggle-cart, .cart__overlay").on("click",function(){s(".cart").toggleClass("is-hidden")})});function toggleCart(){$(".cart").toggleClass("is-hidden")}