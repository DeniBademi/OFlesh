!function($,a,c){"use strict";var b="stickyTableHeaders",d=0,e={fixedOffset:0,leftOffset:0,marginTop:0,objDocument:document,objHead:"head",objWindow:a,scrollableArea:a,cacheHeaderHeight:!1,zIndex:3};function f(f,g){var c=this;c.$el=$(f),c.el=f,c.id=d++,c.$el.bind("destroyed",$.proxy(c.teardown,c)),c.$clonedHeader=null,c.$originalHeader=null,c.cachedHeaderHeight=null,c.isSticky=!1,c.hasBeenSticky=!1,c.leftOffset=null,c.topOffset=null,c.init=function(){c.setOptions(g),c.$el.each(function(){var a=$(this);a.css("padding",0),c.$originalHeader=$("thead:first",this),c.$clonedHeader=c.$originalHeader.clone(),a.trigger("clonedHeader."+b,[c.$clonedHeader]),c.$clonedHeader.addClass("tableFloatingHeader"),c.$clonedHeader.css({display:"none",opacity:0}),c.$originalHeader.addClass("tableFloatingHeaderOriginal"),c.$originalHeader.after(c.$clonedHeader),c.$printStyle=$('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),c.$head.append(c.$printStyle)}),c.$clonedHeader.find("input, select").attr("disabled",!0),c.updateWidth(),c.toggleHeaders(),c.bind()},c.destroy=function(){c.$el.unbind("destroyed",c.teardown),c.teardown()},c.teardown=function(){c.isSticky&&c.$originalHeader.css("position","static"),$.removeData(c.el,"plugin_"+b),c.unbind(),c.$clonedHeader.remove(),c.$originalHeader.removeClass("tableFloatingHeaderOriginal"),c.$originalHeader.css("visibility","visible"),c.$printStyle.remove(),c.el=null,c.$el=null},c.bind=function(){c.$scrollableArea.on("scroll."+b,c.toggleHeaders),c.isWindowScrolling||(c.$window.on("scroll."+b+c.id,c.setPositionValues),c.$window.on("resize."+b+c.id,c.toggleHeaders)),c.$scrollableArea.on("resize."+b,c.toggleHeaders),c.$scrollableArea.on("resize."+b,c.updateWidth)},c.unbind=function(){c.$scrollableArea.off("."+b,c.toggleHeaders),c.isWindowScrolling||(c.$window.off("."+b+c.id,c.setPositionValues),c.$window.off("."+b+c.id,c.toggleHeaders)),c.$scrollableArea.off("."+b,c.updateWidth)},c.debounce=function(a,b){var c=null;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b)}},c.toggleHeaders=c.debounce(function(){c.$el&&c.$el.each(function(){var e,a=$(this),f=c.isWindowScrolling?isNaN(c.options.fixedOffset)?c.options.fixedOffset.outerHeight():c.options.fixedOffset:c.$scrollableArea.offset().top+(isNaN(c.options.fixedOffset)?0:c.options.fixedOffset),d=a.offset(),h=c.$scrollableArea.scrollTop()+f-100,i=c.$scrollableArea.scrollLeft(),g=c.isWindowScrolling?h>d.top:f>d.top;g&&(c.options.cacheHeaderHeight?c.cachedHeaderHeight:c.$clonedHeader.height(),c.isWindowScrolling,d.top,a.height(),c.isWindowScrolling),g?(e=d.left-i+c.options.leftOffset,c.$originalHeader.css({position:"fixed","margin-top":c.options.marginTop,top:0,left:e,"z-index":c.options.zIndex}).addClass("is-fixed"),c.leftOffset=e,c.topOffset=f,c.$clonedHeader.css("display",""),c.isSticky||(c.isSticky=!0,c.updateWidth(),a.trigger("enabledStickiness."+b)),c.setPositionValues()):c.isSticky&&(c.$originalHeader.css("position","static").removeClass("is-fixed"),c.$clonedHeader.css("display","none"),c.isSticky=!1,c.resetWidth($("td,th",c.$clonedHeader),$("td,th",c.$originalHeader)),a.trigger("disabledStickiness."+b))})},0),c.setPositionValues=c.debounce(function(){var a=c.$window.scrollTop(),b=c.$window.scrollLeft();!c.isSticky||a<0||a+c.$window.height()>c.$document.height()||b<0||b+c.$window.width()>c.$document.width()||c.$originalHeader.css({top:c.topOffset-(c.isWindowScrolling?0:a),left:c.leftOffset-(c.isWindowScrolling?0:b)})},0),c.updateWidth=c.debounce(function(){if(c.isSticky){c.$originalHeaderCells||(c.$originalHeaderCells=$("th,td",c.$originalHeader)),c.$clonedHeaderCells||(c.$clonedHeaderCells=$("th,td",c.$clonedHeader));var a=c.getWidth(c.$clonedHeaderCells);c.setWidth(a,c.$clonedHeaderCells,c.$originalHeaderCells),c.$originalHeader.css("width",c.$clonedHeader.width()),c.options.cacheHeaderHeight&&(c.cachedHeaderHeight=c.$clonedHeader.height())}},0),c.getWidth=function(b){var d=[];return b.each(function(g){var e,b=$(this);if("border-box"===b.css("box-sizing")){var f=b[0].getBoundingClientRect();e=f.width?f.width:f.right-f.left}else if("collapse"===$("th",c.$originalHeader).css("border-collapse")){if(a.getComputedStyle)e=parseFloat(a.getComputedStyle(this,null).width);else{var h=parseFloat(b.css("padding-left")),i=parseFloat(b.css("padding-right")),j=parseFloat(b.css("border-width"));e=b.outerWidth()-h-i-j}}else e=b.width();d[g]=e}),d},c.setWidth=function(b,a,c){a.each(function(a){var d=b[a];c.eq(a).css({"min-width":d,"max-width":d})})},c.resetWidth=function(a,b){a.each(function(c){var a=$(this);b.eq(c).css({"min-width":a.css("min-width"),"max-width":a.css("max-width")})})},c.setOptions=function(a){c.options=$.extend({},e,a),c.$window=$(c.options.objWindow),c.$head=$(c.options.objHead),c.$document=$(c.options.objDocument),c.$scrollableArea=$(c.options.scrollableArea),c.isWindowScrolling=c.$scrollableArea[0]===c.$window[0]},c.updateOptions=function(a){c.setOptions(a),c.unbind(),c.bind(),c.updateWidth(),c.toggleHeaders()},c.init()}$.fn[b]=function(a){return this.each(function(){var c=$.data(this,"plugin_"+b);c?"string"==typeof a?c[a].apply(c):c.updateOptions(a):"destroy"!==a&&$.data(this,"plugin_"+b,new f(this,a))})}}(jQuery,window)