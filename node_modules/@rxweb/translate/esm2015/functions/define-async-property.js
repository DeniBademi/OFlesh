import { translateConfigContainer } from '../core/translate-config-container';
export function defineAsyncProperty(model, propertyName, config) {
    let observable = null;
    let service = null;
    let currentLanguage = null;
    Object.defineProperty(model.prototype, propertyName, {
        get: function () {
            if (!observable || currentLanguage != translateConfigContainer.config.languageCode) {
                if (translateConfigContainer.injector) {
                    currentLanguage = translateConfigContainer.config.languageCode;
                    service = translateConfigContainer.injector.get(config.serviceModel);
                    observable = config.serviceMethod.bind(service).call();
                }
            }
            else if (currentLanguage != translateConfigContainer.config.languageCode)
                observable = config.serviceMethod.bind(service).call();
            return observable;
        },
        enumerable: true,
        configurable: true
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmaW5lLWFzeW5jLXByb3BlcnR5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvdHJhbnNsYXRlL2Z1bmN0aW9ucy9kZWZpbmUtYXN5bmMtcHJvcGVydHkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sb0NBQW9DLENBQUE7QUFDN0UsTUFBTSxVQUFVLG1CQUFtQixDQUFDLEtBQWUsRUFBRSxZQUFvQixFQUFFLE1BQTRCO0lBQ25HLElBQUksVUFBVSxHQUFRLElBQUksQ0FBQztJQUMzQixJQUFJLE9BQU8sR0FBUSxJQUFJLENBQUM7SUFDeEIsSUFBSSxlQUFlLEdBQVcsSUFBSSxDQUFDO0lBQ25DLE1BQU0sQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxZQUFZLEVBQUU7UUFDakQsR0FBRyxFQUFFO1lBQ0QsSUFBSSxDQUFDLFVBQVUsSUFBSSxlQUFlLElBQUksd0JBQXdCLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRTtnQkFDaEYsSUFBSSx3QkFBd0IsQ0FBQyxRQUFRLEVBQUU7b0JBQ25DLGVBQWUsR0FBRyx3QkFBd0IsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDO29CQUMvRCxPQUFPLEdBQUcsd0JBQXdCLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUE7b0JBQ3BFLFVBQVUsR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztpQkFDMUQ7YUFDSjtpQkFBSyxJQUFHLGVBQWUsSUFBSSx3QkFBd0IsQ0FBQyxNQUFNLENBQUMsWUFBWTtnQkFDcEUsVUFBVSxHQUFHLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQzNELE9BQU8sVUFBVSxDQUFBO1FBQ3JCLENBQUM7UUFDRCxVQUFVLEVBQUUsSUFBSTtRQUNoQixZQUFZLEVBQUUsSUFBSTtLQUNyQixDQUFDLENBQUE7QUFDTixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXN5bmNUcmFuc2xhdGVDb25maWcgfSBmcm9tIFwiLi4vaW50ZXJmYWNlL2FzeW5jLXRyYW5zbGF0ZS1jb25maWdcIjtcclxuaW1wb3J0IHsgdHJhbnNsYXRlQ29uZmlnQ29udGFpbmVyIH0gZnJvbSAnLi4vY29yZS90cmFuc2xhdGUtY29uZmlnLWNvbnRhaW5lcidcclxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZUFzeW5jUHJvcGVydHkobW9kZWw6IEZ1bmN0aW9uLCBwcm9wZXJ0eU5hbWU6IHN0cmluZywgY29uZmlnOiBBc3luY1RyYW5zbGF0ZUNvbmZpZykge1xyXG4gICAgbGV0IG9ic2VydmFibGU6IGFueSA9IG51bGw7XHJcbiAgICBsZXQgc2VydmljZTogYW55ID0gbnVsbDtcclxuICAgIGxldCBjdXJyZW50TGFuZ3VhZ2U6IHN0cmluZyA9IG51bGw7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kZWwucHJvdG90eXBlLCBwcm9wZXJ0eU5hbWUsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFvYnNlcnZhYmxlIHx8IGN1cnJlbnRMYW5ndWFnZSAhPSB0cmFuc2xhdGVDb25maWdDb250YWluZXIuY29uZmlnLmxhbmd1YWdlQ29kZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyYW5zbGF0ZUNvbmZpZ0NvbnRhaW5lci5pbmplY3Rvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRMYW5ndWFnZSA9IHRyYW5zbGF0ZUNvbmZpZ0NvbnRhaW5lci5jb25maWcubGFuZ3VhZ2VDb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcnZpY2UgPSB0cmFuc2xhdGVDb25maWdDb250YWluZXIuaW5qZWN0b3IuZ2V0KGNvbmZpZy5zZXJ2aWNlTW9kZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZSA9IGNvbmZpZy5zZXJ2aWNlTWV0aG9kLmJpbmQoc2VydmljZSkuY2FsbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZSBpZihjdXJyZW50TGFuZ3VhZ2UgIT0gdHJhbnNsYXRlQ29uZmlnQ29udGFpbmVyLmNvbmZpZy5sYW5ndWFnZUNvZGUpXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZhYmxlID0gY29uZmlnLnNlcnZpY2VNZXRob2QuYmluZChzZXJ2aWNlKS5jYWxsKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBvYnNlcnZhYmxlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSlcclxufVxyXG4iXX0=