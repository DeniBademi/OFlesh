import { translateConfigContainer } from "../core/translate-config-container";
import { PIPE_CONFIG } from "../const/pipe-config.const";
import { getInstanceValue } from "./get-instance-value";
export function runPipe(text, componentData, parentData) {
    let pipeName = '';
    if (text.indexOf("|") !== -1) {
        let splitText = text.split("|");
        let leftText = getInstanceValue(splitText[0].trim(), componentData, parentData);
        let rightText = splitText[1].split(new RegExp(":(?=([^\"]*\"[^\"]*\")*[^\"]*$)")).filter(t => t !== undefined).map(t => getInstanceValue(t, componentData, parentData));
        pipeName = rightText[0].trim();
        rightText.splice(0, 1);
        if (translateConfigContainer.injector && pipeName && PIPE_CONFIG[pipeName]) {
            let resolve = translateConfigContainer.injector.get(PIPE_CONFIG[pipeName]);
            text = resolve.transform.apply(resolve, [leftText, ...rightText]);
        }
    }
    return text;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGlwZS50cmFuc2Zvcm1lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL3RyYW5zbGF0ZS9mdW5jdGlvbnMvcGlwZS50cmFuc2Zvcm1lci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUM5RSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDekQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFFeEQsTUFBTSxVQUFVLE9BQU8sQ0FBQyxJQUFJLEVBQUUsYUFBa0IsRUFBRSxVQUFlO0lBQzdELElBQUksUUFBUSxHQUFXLEVBQUUsQ0FBQztJQUMxQixJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7UUFDMUIsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNoQyxJQUFJLFFBQVEsR0FBRyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsYUFBYSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ2hGLElBQUksU0FBUyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsaUNBQWlDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsYUFBYSxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDeEssUUFBUSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUMvQixTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLHdCQUF3QixDQUFDLFFBQVEsSUFBSSxRQUFRLElBQUksV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQ3hFLElBQUksT0FBTyxHQUFHLHdCQUF3QixDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDM0UsSUFBSSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLFFBQVEsRUFBRSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUM7U0FDckU7S0FDSjtJQUNELE9BQU8sSUFBSSxDQUFDO0FBQ2hCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0cmFuc2xhdGVDb25maWdDb250YWluZXIgfSBmcm9tIFwiLi4vY29yZS90cmFuc2xhdGUtY29uZmlnLWNvbnRhaW5lclwiO1xyXG5pbXBvcnQgeyBQSVBFX0NPTkZJRyB9IGZyb20gXCIuLi9jb25zdC9waXBlLWNvbmZpZy5jb25zdFwiO1xyXG5pbXBvcnQgeyBnZXRJbnN0YW5jZVZhbHVlIH0gZnJvbSBcIi4vZ2V0LWluc3RhbmNlLXZhbHVlXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcnVuUGlwZSh0ZXh0LCBjb21wb25lbnREYXRhOiBhbnksIHBhcmVudERhdGE6IGFueSkge1xyXG4gICAgbGV0IHBpcGVOYW1lOiBzdHJpbmcgPSAnJztcclxuICAgIGlmICh0ZXh0LmluZGV4T2YoXCJ8XCIpICE9PSAtMSkge1xyXG4gICAgICAgIGxldCBzcGxpdFRleHQgPSB0ZXh0LnNwbGl0KFwifFwiKTtcclxuICAgICAgICBsZXQgbGVmdFRleHQgPSBnZXRJbnN0YW5jZVZhbHVlKHNwbGl0VGV4dFswXS50cmltKCksIGNvbXBvbmVudERhdGEsIHBhcmVudERhdGEpO1xyXG4gICAgICAgIGxldCByaWdodFRleHQgPSBzcGxpdFRleHRbMV0uc3BsaXQobmV3IFJlZ0V4cChcIjooPz0oW15cXFwiXSpcXFwiW15cXFwiXSpcXFwiKSpbXlxcXCJdKiQpXCIpKS5maWx0ZXIodCA9PiB0ICE9PSB1bmRlZmluZWQpLm1hcCh0ID0+IGdldEluc3RhbmNlVmFsdWUodCwgY29tcG9uZW50RGF0YSwgcGFyZW50RGF0YSkpO1xyXG4gICAgICAgIHBpcGVOYW1lID0gcmlnaHRUZXh0WzBdLnRyaW0oKTtcclxuICAgICAgICByaWdodFRleHQuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgIGlmICh0cmFuc2xhdGVDb25maWdDb250YWluZXIuaW5qZWN0b3IgJiYgcGlwZU5hbWUgJiYgUElQRV9DT05GSUdbcGlwZU5hbWVdKSB7XHJcbiAgICAgICAgICAgIGxldCByZXNvbHZlID0gdHJhbnNsYXRlQ29uZmlnQ29udGFpbmVyLmluamVjdG9yLmdldChQSVBFX0NPTkZJR1twaXBlTmFtZV0pO1xyXG4gICAgICAgICAgICB0ZXh0ID0gcmVzb2x2ZS50cmFuc2Zvcm0uYXBwbHkocmVzb2x2ZSwgW2xlZnRUZXh0LCAuLi5yaWdodFRleHRdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGV4dDtcclxufSJdfQ==