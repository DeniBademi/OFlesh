import { translateContainer } from "./translate-container";
import { getKeyName } from '../functions/get-key-name';
import { MultiLingualData } from '../core/multilingual-data';
import { BaseResolver } from '../resolver/base-resolver';
import { translateConfigContainer } from '../core/translate-config-container';
import { HttpClient } from "@angular/common/http";
import { Injectable } from "@angular/core";
import { overrideErrorsProperty } from "../functions/override-errors-property";
export class TranslationResolver {
    constructor(httpClient) {
        this.httpClient = httpClient;
        this._allowedLanguages = [];
    }
    set controlErrorMessage(value) {
        if (translateConfigContainer.config && !translateConfigContainer.config.controlErrorMessage) {
            translateConfigContainer.config.controlErrorMessage = value;
            overrideErrorsProperty(translateConfigContainer.config.controlErrorMessage);
        }
    }
    set resolver(value) {
        translateConfigContainer.resolver = value;
    }
    get allowedLanguages() {
        return this._allowedLanguages;
    }
    get activeTranslationsLength() {
        return translateContainer.getActiveTranslations().length;
    }
    set ngxTranslate(value) {
        translateConfigContainer.ngxTranslate = value;
        translateConfigContainer.customLoader = value.customLoader;
    }
    get injector() {
        return translateConfigContainer.injector;
    }
    get pending() {
        return translateConfigContainer.loading;
    }
    get activeLanguage() {
        return translateConfigContainer.config.languageCode;
    }
    set activeLanguage(lang) {
        translateConfigContainer.config.languageCode = lang;
    }
    get translations() {
        return MultiLingualData.data;
    }
    getTranslationName(nodeName, languageCode = null) {
        let instance = translateContainer.getComponentState(nodeName);
        if (instance) {
            let translateConfig = translateContainer.get(instance);
            if (translateConfig && translateConfig.config)
                return getKeyName(translateConfig.config.translationName, languageCode);
        }
        return null;
    }
    getTranslationNameByInstance(instance, languageCode = null) {
        let translateConfig = translateContainer.get(instance);
        if (translateConfig && translateConfig.config)
            return getKeyName(translateConfig.config.translationName, languageCode);
        return null;
    }
    get(modelName, languageCode = '') {
        return MultiLingualData.get(this.getKeyName(modelName, languageCode));
    }
    getKeyName(modelName, languageCode = '') {
        return getKeyName(modelName, languageCode);
    }
    resolve(modelName, languageCode) {
        var baseResolver = new BaseResolver(translateConfigContainer.config, this.httpClient);
        return baseResolver.resolveByName(modelName, languageCode);
    }
    addConfig(name) {
        let containerConfig = translateContainer.getByName(name);
        if (!containerConfig)
            translateContainer.set(null, { translationName: name });
    }
}
TranslationResolver.decorators = [
    { type: Injectable }
];
TranslationResolver.ctorParameters = () => [
    { type: HttpClient }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNsYXRpb24tcmVzb2x2ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy90cmFuc2xhdGUvY29yZS90cmFuc2xhdGlvbi1yZXNvbHZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUMzRCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sMkJBQTJCLENBQUE7QUFDdEQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sMkJBQTJCLENBQUE7QUFDNUQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFBO0FBQ3hELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFBO0FBQzdFLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQTtBQUNqRCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBRS9FLE1BQU0sT0FBTyxtQkFBbUI7SUFDNUIsWUFBb0IsVUFBcUI7UUFBckIsZUFBVSxHQUFWLFVBQVUsQ0FBVztRQUlqQyxzQkFBaUIsR0FBa0IsRUFBRSxDQUFDO0lBRjlDLENBQUM7SUFJRCxJQUFJLG1CQUFtQixDQUFDLEtBQXlCO1FBQzdDLElBQUksd0JBQXdCLENBQUMsTUFBTSxJQUFJLENBQUMsd0JBQXdCLENBQUMsTUFBTSxDQUFDLG1CQUFtQixFQUFFO1lBQ3pGLHdCQUF3QixDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsR0FBRyxLQUFLLENBQUM7WUFDNUQsc0JBQXNCLENBQUMsd0JBQXdCLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUM7U0FDL0U7SUFFTCxDQUFDO0lBRUQsSUFBSSxRQUFRLENBQUMsS0FBZTtRQUN4Qix3QkFBd0IsQ0FBQyxRQUFRLEdBQUcsS0FBSyxD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ZUNvbnRhaW5lciB9IGZyb20gXCIuL3RyYW5zbGF0ZS1jb250YWluZXJcIjtcclxuaW1wb3J0IHsgZ2V0S2V5TmFtZSB9IGZyb20gJy4uL2Z1bmN0aW9ucy9nZXQta2V5LW5hbWUnXHJcbmltcG9ydCB7IE11bHRpTGluZ3VhbERhdGEgfSBmcm9tICcuLi9jb3JlL211bHRpbGluZ3VhbC1kYXRhJ1xyXG5pbXBvcnQgeyBCYXNlUmVzb2x2ZXIgfSBmcm9tICcuLi9yZXNvbHZlci9iYXNlLXJlc29sdmVyJ1xyXG5pbXBvcnQgeyB0cmFuc2xhdGVDb25maWdDb250YWluZXIgfSBmcm9tICcuLi9jb3JlL3RyYW5zbGF0ZS1jb25maWctY29udGFpbmVyJ1xyXG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSBcIkBhbmd1bGFyL2NvbW1vbi9odHRwXCJcclxuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IEVycm9yTWVzc2FnZUNvbmZpZyB9IGZyb20gXCIuLi9pbnRlcmZhY2UvZXJyb3ItbWVzc2FnZS1jb25maWdcIjtcclxuaW1wb3J0IHsgb3ZlcnJpZGVFcnJvcnNQcm9wZXJ0eSB9IGZyb20gXCIuLi9mdW5jdGlvbnMvb3ZlcnJpZGUtZXJyb3JzLXByb3BlcnR5XCI7XHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFRyYW5zbGF0aW9uUmVzb2x2ZXIge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwQ2xpZW50Okh0dHBDbGllbnQpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfYWxsb3dlZExhbmd1YWdlczogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG5cclxuICAgIHNldCBjb250cm9sRXJyb3JNZXNzYWdlKHZhbHVlOiBFcnJvck1lc3NhZ2VDb25maWcpIHtcclxuICAgICAgICBpZiAodHJhbnNsYXRlQ29uZmlnQ29udGFpbmVyLmNvbmZpZyAmJiAhdHJhbnNsYXRlQ29uZmlnQ29udGFpbmVyLmNvbmZpZy5jb250cm9sRXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIHRyYW5zbGF0ZUNvbmZpZ0NvbnRhaW5lci5jb25maWcuY29udHJvbEVycm9yTWVzc2FnZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBvdmVycmlkZUVycm9yc1Byb3BlcnR5KHRyYW5zbGF0ZUNvbmZpZ0NvbnRhaW5lci5jb25maWcuY29udHJvbEVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHNldCByZXNvbHZlcih2YWx1ZTogRnVuY3Rpb24pIHtcclxuICAgICAgICB0cmFuc2xhdGVDb25maWdDb250YWluZXIucmVzb2x2ZXIgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWxsb3dlZExhbmd1YWdlcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWxsb3dlZExhbmd1YWdlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWN0aXZlVHJhbnNsYXRpb25zTGVuZ3RoKCkge1xyXG4gICAgICAgIHJldHVybiB0cmFuc2xhdGVDb250YWluZXIuZ2V0QWN0aXZlVHJhbnNsYXRpb25zKCkubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBuZ3hUcmFuc2xhdGUodmFsdWU6IGFueSkge1xyXG4gICAgICAgIHRyYW5zbGF0ZUNvbmZpZ0NvbnRhaW5lci5uZ3hUcmFuc2xhdGUgPSB2YWx1ZTtcclxuICAgICAgICB0cmFuc2xhdGVDb25maWdDb250YWluZXIuY3VzdG9tTG9hZGVyID0gdmFsdWUuY3VzdG9tTG9hZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpbmplY3RvcigpIHtcclxuICAgICAgICByZXR1cm4gdHJhbnNsYXRlQ29uZmlnQ29udGFpbmVyLmluamVjdG9yO1xyXG4gICAgfVxyXG4gICAgZ2V0IHBlbmRpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zbGF0ZUNvbmZpZ0NvbnRhaW5lci5sb2FkaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhY3RpdmVMYW5ndWFnZSgpIHtcclxuICAgICAgICByZXR1cm4gdHJhbnNsYXRlQ29uZmlnQ29udGFpbmVyLmNvbmZpZy5sYW5ndWFnZUNvZGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGFjdGl2ZUxhbmd1YWdlKGxhbmc6c3RyaW5nKSB7XHJcbiAgICAgICAgdHJhbnNsYXRlQ29uZmlnQ29udGFpbmVyLmNvbmZpZy5sYW5ndWFnZUNvZGU9bGFuZztcclxuICAgIH1cclxuXHJcblxyXG4gICAgZ2V0IHRyYW5zbGF0aW9ucygpIHtcclxuICAgICAgICByZXR1cm4gTXVsdGlMaW5ndWFsRGF0YS5kYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRyYW5zbGF0aW9uTmFtZShub2RlTmFtZTogc3RyaW5nLGxhbmd1YWdlQ29kZTpzdHJpbmcgPSBudWxsKSB7XHJcbiAgICAgICAgbGV0IGluc3RhbmNlID0gdHJhbnNsYXRlQ29udGFpbmVyLmdldENvbXBvbmVudFN0YXRlKG5vZGVOYW1lKTtcclxuICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgbGV0IHRyYW5zbGF0ZUNvbmZpZyA9IHRyYW5zbGF0ZUNvbnRhaW5lci5nZXQoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICBpZiAodHJhbnNsYXRlQ29uZmlnICYmIHRyYW5zbGF0ZUNvbmZpZy5jb25maWcpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0S2V5TmFtZSh0cmFuc2xhdGVDb25maWcuY29uZmlnLnRyYW5zbGF0aW9uTmFtZSwgbGFuZ3VhZ2VDb2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBnZXRUcmFuc2xhdGlvbk5hbWVCeUluc3RhbmNlKGluc3RhbmNlOiBhbnksIGxhbmd1YWdlQ29kZTogc3RyaW5nID0gbnVsbCkge1xyXG4gICAgICAgIGxldCB0cmFuc2xhdGVDb25maWcgPSB0cmFuc2xhdGVDb250YWluZXIuZ2V0KGluc3RhbmNlKTtcclxuICAgICAgICBpZiAodHJhbnNsYXRlQ29uZmlnICYmIHRyYW5zbGF0ZUNvbmZpZy5jb25maWcpXHJcbiAgICAgICAgICAgIHJldHVybiBnZXRLZXlOYW1lKHRyYW5zbGF0ZUNvbmZpZy5jb25maWcudHJhbnNsYXRpb25OYW1lLCBsYW5ndWFnZUNvZGUpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGdldChtb2RlbE5hbWU6IHN0cmluZywgbGFuZ3VhZ2VDb2RlOiBzdHJpbmcgPSAnJykge1xyXG4gICAgICAgIHJldHVybiBNdWx0aUxpbmd1YWxEYXRhLmdldCh0aGlzLmdldEtleU5hbWUobW9kZWxOYW1lLGxhbmd1YWdlQ29kZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEtleU5hbWUobW9kZWxOYW1lOiBzdHJpbmcsIGxhbmd1YWdlQ29kZTogc3RyaW5nID0gJycpIHtcclxuICAgICAgICByZXR1cm4gZ2V0S2V5TmFtZShtb2RlbE5hbWUsIGxhbmd1YWdlQ29kZSk7XHJcbiAgICB9XHJcbiAgICByZXNvbHZlKG1vZGVsTmFtZSwgbGFuZ3VhZ2VDb2RlOiBzdHJpbmcpIHtcclxuICAgICAgICB2YXIgYmFzZVJlc29sdmVyID0gbmV3IEJhc2VSZXNvbHZlcih0cmFuc2xhdGVDb25maWdDb250YWluZXIuY29uZmlnLCB0aGlzLmh0dHBDbGllbnQpO1xyXG4gICAgICAgIHJldHVybiBiYXNlUmVzb2x2ZXIucmVzb2x2ZUJ5TmFtZShtb2RlbE5hbWUsIGxhbmd1YWdlQ29kZSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ29uZmlnKG5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBjb250YWluZXJDb25maWcgPSB0cmFuc2xhdGVDb250YWluZXIuZ2V0QnlOYW1lKG5hbWUpO1xyXG4gICAgICAgIGlmICghY29udGFpbmVyQ29uZmlnKVxyXG4gICAgICAgICAgICB0cmFuc2xhdGVDb250YWluZXIuc2V0KG51bGwsIHsgdHJhbnNsYXRpb25OYW1lOiBuYW1lIH0pO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG59Il19