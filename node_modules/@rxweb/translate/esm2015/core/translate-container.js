import { defineProperty } from "../functions/define-property";
import { defineAsyncProperty } from "../functions/define-async-property";
import { overrideDestroyMethod } from "../functions/override-destroy";
export const translateContainer = new (class {
    constructor() {
        this.store = new Array();
        this.additionalStore = new Array();
        this.componentState = {};
    }
    set(instance, config) {
        let translateConfig = this.store.filter(t => t.instance == instance)[0];
        if (!translateConfig)
            this.store.push({ instance: instance, config: config });
        else
            this.additionalStore.push({ instance: instance, config: config });
    }
    get(instance) {
        let containerConfig = this.store.filter(t => t.instance == instance);
        return containerConfig.length > 0 ? containerConfig[0] : undefined;
    }
    additionalGet(instance) {
        return this.additionalStore.filter(t => t.instance == instance);
    }
    getByName(name) {
        let containerConfig = this.store.filter(t => t.config.translationName == name);
        if (containerConfig.length == 0)
            containerConfig = this.additionalStore.filter(t => t.config.translationName == name);
        return containerConfig.length > 0 ? containerConfig[0] : undefined;
    }
    defineAsyncProperty(instance, propertyName, config) {
        let isPropertyKey = (propertyName != undefined);
        var model = !isPropertyKey ? instance : instance.constructor;
        defineAsyncProperty(model, propertyName, config);
    }
    defineProperty(instance, propertyName, config) {
        let isPropertyKey = (propertyName != undefined);
        var model = !isPropertyKey ? instance : instance.constructor;
        let modelName = config === undefined ? "global" : config.translationName;
        defineProperty(model, propertyName, modelName, config ? config.language : undefined, config ? config.filePath : undefined);
        if (modelName != "global" && propertyName) {
            let instanceConfig = { instance: model, config: config };
            this.set(model, config);
            let count = this.store.filter(t => t.instance == model).length;
            count = this.additionalStore.filter(t => t.instance == model).length + count;
            if (count == 1)
                overrideDestroyMethod(model, config.translationName);
            return instanceConfig;
        }
        else if (!propertyName)
            this.set(model, config);
    }
    setComponentState(key, instance) {
        this.componentState[key] = instance;
    }
    getComponentState(key) {
        return this.componentState[key];
    }
    getActiveTranslations() {
        return this.store;
    }
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNsYXRlLWNvbnRhaW5lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL3RyYW5zbGF0ZS9jb3JlL3RyYW5zbGF0ZS1jb250YWluZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQzlELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQ3pFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBSXRFLE1BQU0sQ0FBQyxNQUFNLGtCQUFrQixHQVl2QixJQUFJLENBQUM7SUFBQTtRQUNMLFVBQUssR0FBK0IsSUFBSSxLQUFLLEVBQTRCLENBQUM7UUFDMUUsb0JBQWUsR0FBK0IsSUFBSSxLQUFLLEVBQTRCLENBQUM7UUFFcEYsbUJBQWMsR0FBZ0MsRUFBRSxDQUFDO0lBNERyRCxDQUFDO0lBM0RHLEdBQUcsQ0FBQyxRQUFrQixFQUFFLE1BQXVCO1FBQzNDLElBQUksZUFBZSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUN2RSxJQUFJLENBQUMsZUFBZTtZQUNoQixJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7O1lBRXhELElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUMxRSxDQUFDO0lBRUQsR0FBRyxDQUFDLFFBQWtCO1FBQ2xCLElBQUksZUFBZSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENB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QkFBcUIsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ3pELE9BQU8sY0FBYyxDQUFDO1NBQ3pCO2FBQU0sSUFBSSxDQUFDLFlBQVk7WUFDcEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUVELGlCQUFpQixDQUFDLEdBQVcsRUFBRSxRQUFrQjtRQUM3QyxJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFFBQVEsQ0FBQztJQUN4QyxDQUFDO0lBRUQsaUJBQWlCLENBQUMsR0FBVztRQUN6QixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVELHFCQUFxQjtRQUNqQixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDdEIsQ0FBQztDQUNKLENBQUMsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHJhbnNsYXRlQ29uZmlnIH0gZnJvbSBcIi4uL2ludGVyZmFjZS90cmFuc2xhdGUtY29uZmlnXCI7XHJcbmltcG9ydCB7IFRyYW5zbGF0ZUNvbnRhaW5lckNvbmZpZyB9IGZyb20gXCIuLi9pbnRlcmZhY2UvdHJhbnNsYXRlLWNvbnRhaW5lci1jb25maWdcIjtcclxuaW1wb3J0IHsgZGVmaW5lUHJvcGVydHkgfSBmcm9tIFwiLi4vZnVuY3Rpb25zL2RlZmluZS1wcm9wZXJ0eVwiO1xyXG5pbXBvcnQgeyBkZWZpbmVBc3luY1Byb3BlcnR5IH0gZnJvbSBcIi4uL2Z1bmN0aW9ucy9kZWZpbmUtYXN5bmMtcHJvcGVydHlcIjtcclxuaW1wb3J0IHsgb3ZlcnJpZGVEZXN0cm95TWV0aG9kIH0gZnJvbSBcIi4uL2Z1bmN0aW9ucy9vdmVycmlkZS1kZXN0cm95XCI7XHJcbmltcG9ydCB7IFJ4VHJhbnNsYXRlQ29uZmlnIH0gZnJvbSBcIi4uL2ludGVyZmFjZS9yeC10cmFuc2xhdGUtY29uZmlnXCI7XHJcbmltcG9ydCB7IEFzeW5jVHJhbnNsYXRlQ29uZmlnIH0gZnJvbSBcIi4uL2ludGVyZmFjZS9hc3luYy10cmFuc2xhdGUtY29uZmlnXCI7XHJcblxyXG5leHBvcnQgY29uc3QgdHJhbnNsYXRlQ29udGFpbmVyOlxyXG4gICAge1xyXG4gICAgICAgIHNldChpbnN0YW5jZTogRnVuY3Rpb24sIGNvbmZpZzogVHJhbnNsYXRlQ29uZmlnKTogdm9pZDtcclxuICAgICAgICBnZXRCeU5hbWUobmFtZTogc3RyaW5nKTogVHJhbnNsYXRlQ29udGFpbmVyQ29uZmlnO1xyXG4gICAgICAgIGdldChpbnN0YW5jZTogYW55KTogVHJhbnNsYXRlQ29udGFpbmVyQ29uZmlnO1xyXG4gICAgICAgIGFkZGl0aW9uYWxHZXQoaW5zdGFuY2U6IGFueSk6IFRyYW5zbGF0ZUNvbnRhaW5lckNvbmZpZ1tdO1xyXG4gICAgICAgIGRlZmluZVByb3BlcnR5KGluc3RhbmNlOiBGdW5jdGlvbiwgcHJvcGVydHlOYW1lOiBzdHJpbmcsIGNvbmZpZzogVHJhbnNsYXRlQ29uZmlnKTogVHJhbnNsYXRlQ29udGFpbmVyQ29uZmlnO1xyXG4gICAgICAgIGRlZmluZUFzeW5jUHJvcGVydHkoaW5zdGFuY2U6IEZ1bmN0aW9uLCBwcm9wZXJ0eU5hbWU6IHN0cmluZywgY29uZmlnOiBBc3luY1RyYW5zbGF0ZUNvbmZpZyk6IHZvaWQ7XHJcbiAgICAgICAgc2V0Q29tcG9uZW50U3RhdGUoa2V5OiBzdHJpbmcsIGluc3RhbmNlOiBGdW5jdGlvbik7XHJcbiAgICAgICAgZ2V0Q29tcG9uZW50U3RhdGUoa2V5OiBzdHJpbmcpO1xyXG4gICAgICAgIGNvbmZpZzogUnhUcmFuc2xhdGVDb25maWc7XHJcbiAgICAgICAgZ2V0QWN0aXZlVHJhbnNsYXRpb25zKCk6IEFycmF5PFRyYW5zbGF0ZUNvbnRhaW5lckNvbmZpZz5cclxuICAgIH0gPSBuZXcgKGNsYXNzIHtcclxuICAgICAgICBzdG9yZTogVHJhbnNsYXRlQ29udGFpbmVyQ29uZmlnW10gPSBuZXcgQXJyYXk8VHJhbnNsYXRlQ29udGFpbmVyQ29uZmlnPigpO1xyXG4gICAgICAgIGFkZGl0aW9uYWxTdG9yZTogVHJhbnNsYXRlQ29udGFpbmVyQ29uZmlnW10gPSBuZXcgQXJyYXk8VHJhbnNsYXRlQ29udGFpbmVyQ29uZmlnPigpO1xyXG4gICAgICAgIGNvbmZpZzogUnhUcmFuc2xhdGVDb25maWc7XHJcbiAgICAgICAgY29tcG9uZW50U3RhdGU6IHsgW2tleTogc3RyaW5nXTogRnVuY3Rpb24gfSA9IHt9O1xyXG4gICAgICAgIHNldChpbnN0YW5jZTogRnVuY3Rpb24sIGNvbmZpZzogVHJhbnNsYXRlQ29uZmlnKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCB0cmFuc2xhdGVDb25maWcgPSB0aGlzLnN0b3JlLmZpbHRlcih0ID0+IHQuaW5zdGFuY2UgPT0gaW5zdGFuY2UpWzBdXHJcbiAgICAgICAgICAgIGlmICghdHJhbnNsYXRlQ29uZmlnKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZS5wdXNoKHsgaW5zdGFuY2U6IGluc3RhbmNlLCBjb25maWc6IGNvbmZpZyB9KTtcclxuICAgICAgICAgICAgZWxzZSBcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkaXRpb25hbFN0b3JlLnB1c2goeyBpbnN0YW5jZTogaW5zdGFuY2UsIGNvbmZpZzogY29uZmlnIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0KGluc3RhbmNlOiBGdW5jdGlvbik6IFRyYW5zbGF0ZUNvbnRhaW5lckNvbmZpZyB7XHJcbiAgICAgICAgICAgIGxldCBjb250YWluZXJDb25maWcgPSB0aGlzLnN0b3JlLmZpbHRlcih0ID0+IHQuaW5zdGFuY2UgPT0gaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyQ29uZmlnLmxlbmd0aCA+IDAgP2NvbnRhaW5lckNvbmZpZ1swXSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFkZGl0aW9uYWxHZXQoaW5zdGFuY2U6IEZ1bmN0aW9uKTogVHJhbnNsYXRlQ29udGFpbmVyQ29uZmlnW10ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRpdGlvbmFsU3RvcmUuZmlsdGVyKHQgPT4gdC5pbnN0YW5jZSA9PSBpbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBnZXRCeU5hbWUobmFtZTogc3RyaW5nKTogVHJhbnNsYXRlQ29udGFpbmVyQ29uZmlnIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRhaW5lckNvbmZpZyA9IHRoaXMuc3RvcmUuZmlsdGVyKHQgPT4gdC5jb25maWcudHJhbnNsYXRpb25OYW1lID09IG5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyQ29uZmlnLmxlbmd0aCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyQ29uZmlnID0gdGhpcy5hZGRpdGlvbmFsU3RvcmUuZmlsdGVyKHQgPT4gdC5jb25maWcudHJhbnNsYXRpb25OYW1lID09IG5hbWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyQ29uZmlnLmxlbmd0aCA+IDAgPyBjb250YWluZXJDb25maWdbMF0gOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgZGVmaW5lQXN5bmNQcm9wZXJ0eShpbnN0YW5jZTogRnVuY3Rpb24sIHByb3BlcnR5TmFtZTogc3RyaW5nLCBjb25maWc6IEFzeW5jVHJhbnNsYXRlQ29uZmlnKSB7XHJcbiAgICAgICAgICAgIGxldCBpc1Byb3BlcnR5S2V5ID0gKHByb3BlcnR5TmFtZSAhPSB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICB2YXIgbW9kZWw6IEZ1bmN0aW9uID0gIWlzUHJvcGVydHlLZXkgPyBpbnN0YW5jZSA6IGluc3RhbmNlLmNvbnN0cnVjdG9yO1xyXG4gICAgICAgICAgICBkZWZpbmVBc3luY1Byb3BlcnR5KG1vZGVsLCBwcm9wZXJ0eU5hbWUsIGNvbmZpZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkZWZpbmVQcm9wZXJ0eShpbnN0YW5jZTogRnVuY3Rpb24sIHByb3BlcnR5TmFtZTogc3RyaW5nLCBjb25maWc/OiBUcmFuc2xhdGVDb25maWcpOiBUcmFuc2xhdGVDb250YWluZXJDb25maWcge1xyXG4gICAgICAgICAgICBsZXQgaXNQcm9wZXJ0eUtleSA9IChwcm9wZXJ0eU5hbWUgIT0gdW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgdmFyIG1vZGVsOiBGdW5jdGlvbiA9ICFpc1Byb3BlcnR5S2V5ID8gaW5zdGFuY2UgOiBpbnN0YW5jZS5jb25zdHJ1Y3RvcjtcclxuICAgICAgICAgICAgbGV0IG1vZGVsTmFtZSA9IGNvbmZpZyA9PT0gdW5kZWZpbmVkID8gXCJnbG9iYWxcIiA6IGNvbmZpZy50cmFuc2xhdGlvbk5hbWU7XHJcbiAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KG1vZGVsLCBwcm9wZXJ0eU5hbWUsIG1vZGVsTmFtZSwgY29uZmlnID8gY29uZmlnLmxhbmd1YWdlIDogdW5kZWZpbmVkLCBjb25maWcgPyBjb25maWcuZmlsZVBhdGggOiB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICBpZiAobW9kZWxOYW1lICE9IFwiZ2xvYmFsXCIgJiYgcHJvcGVydHlOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5zdGFuY2VDb25maWc6IFRyYW5zbGF0ZUNvbnRhaW5lckNvbmZpZyA9IHsgaW5zdGFuY2U6IG1vZGVsLCBjb25maWc6IGNvbmZpZyB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQobW9kZWwsIGNvbmZpZylcclxuICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IHRoaXMuc3RvcmUuZmlsdGVyKHQgPT4gdC5pbnN0YW5jZSA9PSBtb2RlbCkubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgY291bnQgPSB0aGlzLmFkZGl0aW9uYWxTdG9yZS5maWx0ZXIodCA9PiB0Lmluc3RhbmNlID09IG1vZGVsKS5sZW5ndGggKyBjb3VudDtcclxuICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJyaWRlRGVzdHJveU1ldGhvZChtb2RlbCwgY29uZmlnLnRyYW5zbGF0aW9uTmFtZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2VDb25maWc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXByb3BlcnR5TmFtZSlcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KG1vZGVsLCBjb25maWcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0Q29tcG9uZW50U3RhdGUoa2V5OiBzdHJpbmcsIGluc3RhbmNlOiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudFN0YXRlW2tleV0gPSBpbnN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdldENvbXBvbmVudFN0YXRlKGtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudFN0YXRlW2tleV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBnZXRBY3RpdmVUcmFuc2xhdGlvbnMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0b3JlO1xyXG4gICAgICAgIH1cclxuICAgIH0pKCk7Il19